CREATE TABLE Users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role ENUM('admin','registered') DEFAULT 'registered',
    profile_image_link VARCHAR(255),

);
CREATE TABLE user_settings (
    setting_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,                  
    theme_mode VARCHAR(10) DEFAULT 'light', 
    accent_color VARCHAR(7) DEFAULT '#2e51a2',
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

CREATE TABLE Media (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    type ENUM('movie','tvshow','manga') NOT NULL,
    poster_image_link VARCHAR(255),
    score DECIMAL(3,1), -- average rating 1–10
    status ENUM('airing','upcoming','completed') DEFAULT 'upcoming',
    aired_date DATE,
    producer VARCHAR(100),
    studio VARCHAR(100),
    source VARCHAR(100),
    genre VARCHAR(100),
    duration VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Watchlist (
    watchlist_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    media_id INT,
    status ENUM('completed','watching','plan_to_watch','dropped') DEFAULT 'plan_to_watch',
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(user_id),
    FOREIGN KEY (media_id) REFERENCES Media(media_id)
);


CREATE TABLE Reviews (
    review_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    media_id INT,
    review_text TEXT,
    rating INT CHECK (rating BETWEEN 1 AND 10),
    status ENUM('pending','approved','rejected') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(user_id),
    FOREIGN KEY (media_id) REFERENCES Media(media_id)
);


CREATE TABLE Favorites (
    favorite_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    media_id INT,
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(user_id),
    FOREIGN KEY (media_id) REFERENCES Media(media_id),
    UNIQUE(user_id, media_id) -- Prevents duplicate favorites
);


CREATE TABLE articles (
    articles_id INT AUTO_INCREMENT PRIMARY KEY,
    image_url VARCHAR(500) NOT NULL,
    article_url VARCHAR(500) NOT NULL
);

CREATE TABLE trailers (
    trailers_id INT AUTO_INCREMENT PRIMARY KEY,
    image_url VARCHAR(500) NOT NULL,
    video_url VARCHAR(500) NOT NULL
);

CREATE TABLE currentlyairingmedia (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    type ENUM('movie','tvshow','manga') NOT NULL,
    poster_image_link VARCHAR(255),
    score DECIMAL(3,1), -- average rating 1–10
    status ENUM('airing','upcoming','completed') DEFAULT 'upcoming',
    aired_date DATE,
    producer VARCHAR(100),
    studio VARCHAR(100),
    source VARCHAR(100),
    genre VARCHAR(100),
    duration VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE TopUpcoming (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    type ENUM('movie','tvshow','manga') NOT NULL,
    poster_image_link VARCHAR(255),
    score DECIMAL(3,1), -- average rating 1–10
    status ENUM('airing','upcoming','completed') DEFAULT 'upcoming',
    aired_date DATE,
    producer VARCHAR(100),
    studio VARCHAR(100),
    source VARCHAR(100),
    genre VARCHAR(100),
    duration VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE TopAnime (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    type ENUM('movie','tvshow','manga') NOT NULL,
    poster_image_link VARCHAR(255),
    score DECIMAL(3,1), -- average rating 1–10
    status ENUM('airing','upcoming','completed') DEFAULT 'upcoming',
    aired_date DATE,
    producer VARCHAR(100),
    studio VARCHAR(100),
    source VARCHAR(100),
    genre VARCHAR(100),
    duration VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE TopManga (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    type ENUM('movie','tvshow','manga') NOT NULL,
    poster_image_link VARCHAR(255),
    score DECIMAL(3,1), -- average rating 1–10
    status ENUM('airing','upcoming','completed') DEFAULT 'upcoming',
    aired_date DATE,
    producer VARCHAR(100),
    studio VARCHAR(100),
    source VARCHAR(100),
    genre VARCHAR(100),
    duration VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

///////////////////////////////////////////////////////////////

CREATE TABLE requestmedia (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    type VARCHAR(50) NOT NULL,
    poster VARCHAR(255) NOT NULL,
    studio VARCHAR(255) NOT NULL,
    producer VARCHAR(255) NOT NULL,
    genre VARCHAR(255) NOT NULL,
    duration VARCHAR(50) NOT NULL,
    source VARCHAR(255) NOT NULL,
    description TEXT,
    requested_by VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);